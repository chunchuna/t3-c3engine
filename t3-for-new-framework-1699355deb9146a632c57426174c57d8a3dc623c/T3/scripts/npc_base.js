/** * * Characters base */var h_INSTANCE_KEY = "Charactersbase"var h_HANDER_COUNT = 0var h_Canvas_CharacterNameTextvar h_Canvas_CharactersHeadFramevar h_Layer_CharactersUiLayervar h_CurrentlySelectedCharactersvar h_PLAYERINIT_FRAME(h_INSTANCE_KEY, function Init() {    h_Canvas_CharacterNameText = INSTANCE_IS("Characters_name")    h_Canvas_CharactersHeadFrame = INSTANCE_IS("Characters_t_box")    h_Layer_CharactersUiLayer = LAYER_IS("npc_ui")})UPDATE_FRAME(h_INSTANCE_KEY,    function CalculatedPlayerDistance() { //  计算于玩家的距离        h_PLAYER = INSTANCE_IS("Pl")        if (h_PLAYER == null) return        var CharactersInstanceArrays = EVENT_GET_INSTANCE_CLASS("f_npc")        for (let Characterss of CharactersInstanceArrays) {            if (CharactersInstanceArrays == null) return;            var x1 = Characterss.x            var y1 = Characterss.y            var x2 = h_PLAYER.x            var y2 = h_PLAYER.y            Characterss.instVars.Characters_distance = MathGetDistance(x1, y1, x2, y2)        }    })UPDATE_FRAME(h_INSTANCE_KEY,    async function CharactersFeedbackUI() {  // UI于玩家交互        var InteractionDistanceWithCharacterss = 200        var CharactersInstanceArray = EVENT_GET_INSTANCE_CLASS("f_npc")        for (let Characterss of CharactersInstanceArray) {            var distance = Characterss.instVars.Characters_distance            if (distance <= InteractionDistanceWithCharacterss) {                h_CurrentlySelectedCharacters = Characterss                LAYER_VISIBLE("npc_ui", true)                h_Canvas_CharacterNameText.text = Characterss.instVars.npc_name            }            if (distance > InteractionDistanceWithCharacterss) {                if (Characterss == h_CurrentlySelectedCharacters) {                    LAYER_VISIBLE("npc_ui", false)                }            }        }    })